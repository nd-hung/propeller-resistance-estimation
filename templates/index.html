{% extends 'includes/layout.html' %}

{% block body %}
    <div class="container" style="padding-top: 30px; padding-bottom: 60px;">
        <div class="row justify-content-center">
            {# left section of page, for uploading, showing image and prediction#}
            <div class="col-4" id="rcorners">
                <form class="form-inline" method="post" enctype=multipart/form-data>
                    <h5 class="sb-4 font-weight-normal">
                        <p align="center">
                            Upload image
                        </p>
                    </h5>
                    <p align="center">
                        <input type="file" name="file" class="form-control-file" id="inputfile">
                        <button type="submit" id="btnUpload" class="btn btn-outline-primary">Upload</button>
                    </p>
                </form>
            </div>
        </div>
    </div>

    <script src="//code.jquery.com/jquery-3.3.1.slim.min.js"
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
            crossorigin="anonymous"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
            integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
            crossorigin="anonymous"></script>
    <script src="//stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
            integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
            crossorigin="anonymous"></script>
    <script type="text/javascript">
        $('#inputfile').bind('change', function () {
            let fileSize = this.files[0].size / 1024 / 1024; // this gives in MB
            if (fileSize > 2) {
                $("#inputfile").val(null);
                alert('Please upload image < 2MB!')
                return
            }

            let ext = $('#inputfile').val().split('.').pop().toLowerCase();
            if ($.inArray(ext, ['jpg', 'jpeg']) == -1) {
                $("#inputfile").val(null);
                alert('Please upload JPEG/JPG image!');
            }
        });
    </script>

{% endblock %}
